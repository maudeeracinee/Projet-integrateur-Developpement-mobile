<div class="homePage-container">
    <img class="game-logo" src="./assets/mainmenu/SteamSteel.png" alt="game-logo" />

    <div class="home-button-section">
        <ng-container *ngIf="!isLoggedIn">
            <button class="button" (click)="toggleRegisterModal()">Inscription</button>
            <button class="button" (click)="toggleLoginModal()">Connexion</button>
        </ng-container>
        <ng-container *ngIf="isLoggedIn">
            <button class="create-game-button" (click)="navigateToJoin()">Rejoindre une partie</button>
            <button class="button" (click)="navigateToCreateGame()">Commencer une nouvelle partie</button>
            <button class="button" (click)="navigateToAdmin()">Administration des jeux</button>
            <button class="button" (click)="showShop = true">Boutique</button>
            <app-shop *ngIf="showShop" (closed)="showShop = false"></app-shop>
        </ng-container>
    </div>
    @if (isLoggedIn) {
    <button class="account-button" aria-label="Account settings" (click)="isAccountModalVisible = true">
        <span class="material-icons">account_circle</span>
    </button>
    <button class="chat-toggle-button" aria-label="Toggle global chat" (click)="isChatVisible = !isChatVisible">
        <span class="material-icons">chat_bubble_outline</span>
    </button>
    @if (isChatVisible) {
    <div class="global-chat-wrapper">
        <app-chatroom [isInGame]="false" (closed)="isChatVisible = false"></app-chatroom>
    </div>
    } }
    @if (showDeleteConfirmation) {
        <div class="delete-account-modal">
            <div class="popup-overlay"></div>
            <div class="modal">
                <h2>Confirmer la suppression</h2>
                <p>Êtes-vous sûr de vouloir supprimer votre compte ?</p>
                <p>Cette action est irréversible.</p>
    
                <div class="modal-button-container">
                    <button class="modal-button" (click)="confirmDeleteAccount()">Oui</button>
                    <button class="modal-button" (click)="showDeleteConfirmation = false">Non</button>
                </div>
            </div>
        </div>
    }

    <ng-container *ngIf="isLoginModalVisible">
        <div class="modal-overlay">
            <div class="modal">
                <span class="close-button" (click)="onCloseLoginModal()">×</span>
                <app-authentication mode="login" (closed)="onCloseLoginModal()"></app-authentication>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="isRegisterModalVisible">
        <div class="modal-overlay">
            <div class="modal">
                <span class="close-button" (click)="onCloseRegisterModal()">×</span>
                <app-authentication mode="register" (closed)="onCloseRegisterModal()"></app-authentication>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="isAccountModalVisible">
        <div class="modal-overlay">
            <div class="modal">
                <span class="close-button" (click)="onCloseAccountModal()" onkeypress="">×</span>
                <app-account (deleteRequest)="showDeleteConfirmation = true"   (closed)="onCloseAccountModal()" ></app-account>
            </div>
        </div>
    </ng-container>
    <footer class="footer-item">
        <h4 class="team-number">{{ teamNumber }}</h4>
        <p class="developers">{{ developers.join(', ') }}</p>
    </footer>
</div>
